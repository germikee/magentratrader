<link href="/wijmo/styles/wijmo.min.css" rel="stylesheet" />

<script src="/js/jquery-1.10.2.min.js"></script>
<script src="/js/knockout-3.2.0.js"></script>

<nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
    <div class="container topnav">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand topnav" href="/Home"><span><img src="/img/logo-1.png" /></span><span class="hidden-xs"> - Admin v.Beta.1.20150101</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#users">Users</a>
                </li>
                <li>
                    <a href="#events">Events</a>
                </li>
                <li>
                    <a href="#">Products</a>
                </li>
                <li>
                    <a href="#">Purchases</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<a name="users"></a>
<div class="content-section-a">
    <div class="container">
        <div class="row">
            <hr class="section-heading-spacer">
            <div class="clearfix"></div>
            <h2 class="section-heading">Users</h2>
            <div id="UserList"></div>
        </div>
    </div>
</div>

<a name="events"></a>
<div class="content-section-a">
    <div class="container">
        <div class="row">
            <hr class="section-heading-spacer">
            <div class="clearfix"></div>
            <h2 class="section-heading">Events</h2>
           <div id="EventList"></div>
            <div class="row-fluid well grid-sort-group">
                <button class="btn btn-default" data-toggle="modal" data-target="#EventDetail" id="btnEditEvent">
                    Edit Detail...
                </button>
                <button class="btn btn-default" data-toggle="modal" data-target="#EventDetail" id="btnAddEvent">
                    Add...
                </button>
                <button class="btn btn-default" id="btnDeleteEvent">
                    Delete
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="EventDetail">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">Event Detail</h4>
            </div>
            <div class="modal-body">
                <dl class="dl-horizontal">
                    <dt>Date</dt>
                    <dd>
                        <input class="form-control" id="Event_EventDate" type="text" />
                    </dd>
                    <dt>Event</dt>
                    <dd>
                        <input class="form-control" id="Event_EventDescription" type="text" />
                    </dd>
                    <dt>Particulars</dt>
                    <dd>
                        <input class="form-control" id="Event_Particulars" type="text" />
                    </dd>
                    <dt>URL</dt>
                    <dd>
                        <input class="form-control" id="Event_URL" type="text" />
                    </dd>
                    <dt>Type</dt>
                    <dd>
                        <input class="form-control" id="Event_EventType" type="text" />
                    </dd>
                    <dt>Resticted</dt>
                    <dd>
                        <input class="form-control" id="Event_IsRestricted" type="checkbox" />
                    </dd>
                    <dt>Archived</dt>
                    <dd>
                        <input class="form-control" id="Event_IsArchived" type="checkbox" />
                    </dd>
                </dl>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" id="CmdOKEvent">
                    OK
                </button>
                <button type="button" class="btn btn-warning" data-dismiss="modal" id="CmdCancelEvent">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    function getEvents() {
        var events = new wijmo.collections.ObservableArray();
        $.ajax({
            url: '/api/Event',
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            data: {},
            success: function (Results) {
                if (Results.length > 0) {
                    for (i = 0; i < Results.length; i++) {
                        events.push({
                            EventDate: Results[i]["EventDate"],
                            Event: Results[i]["Event"],
                            Particulars: Results[i]["Particulars"],
                            URL: Results[i]["URL"],
                            EventType: Results[i]["EventType"],
                            IsRestricted: Results[i]["IsRestricted"],
                            IsArchived: Results[i]["IsArchived"]
                        });
                    }
                } else {
                    alert("No data.");
                }
            }
        }).fail(
                function (xhr, textStatus, err) {
                    alert(err);
                }
        );
        return events;
    }
    function getUsers() {
        var users = new wijmo.collections.ObservableArray();
        $.ajax({
            url: '/api/User',
            cache: false,
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            data: {},
            success: function (Results) {
                if (Results.length > 0) {
                    for (i = 0; i < Results.length; i++) {
                        users.push({
                            UserName: Results[i]["UserName"],
                            FirstName: Results[i]["FirstName"],
                            LastName: Results[i]["LastName"],
                            EmailAddress: Results[i]["EmailAddress"],
                            PhoneNumber: Results[i]["PhoneNumber"]
                        });
                    }
                } else {
                    alert("No data.");
                }
            }
        }).fail(
                function (xhr, textStatus, err) {
                    alert(err);
                }
        );
        return users;
    }

    $(document).ready(function () {
        var Users = new wijmo.collections.CollectionView(getUsers());
        var Events = new wijmo.collections.CollectionView(getEvents());

        var UserGrid = new wijmo.grid.FlexGrid('#UserList');
        var EventGrid = new wijmo.grid.FlexGrid('#EventList');

        UserGrid.initialize({
            itemsSource: Users
        });
        EventGrid.initialize({
            itemsSource: Events
        });
    });
</script>

<script src="/lib/jquery/js/jquery.js"></script>
<script src="/lib/bootstrap/js/bootstrap.js"></script>

<script src="/wijmo/controls/wijmo.min.js"></script>
<script src="/wijmo/controls/wijmo.input.min.js"></script>
<script src="/wijmo/controls/wijmo.grid.min.js"></script>
<script src="/wijmo/interop/knockout/wijmo.knockout.min.js"></script>